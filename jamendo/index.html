<html>
<head><title>Jamendo API toy application</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!-- Basic utility libs -->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore.js"></script>

<!-- Framework stuff -->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/backbone.marionette/1.8.6/backbone.marionette.js"></script>

<!-- Bootstrap -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
<!-- Latest compiled and minified JavaScript -->
<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>


<!--
  TEMPLATES
-->

<script type="text/html" id="LoginFormView">
  <div class="form-group">
    <label for="jamendo-username">User name</label>
    <input type="text" class="form-control" id="jamendo-username" placeholder="User name">
  </div>
  <div class="form-group">
    <label for="jamendo-password">Password</label>
    <input type="password" class="form-control" id="jamendo-password" placeholder="Password">
  </div>
  <button type="submit" class="btn btn-default">Submit</button>
</script>



<!--
  CODE
-->
<script type="text/javascript">
var App = new Marionette.Application();

App.addRegions({
	bodyRegion: 'body'
});

App.LoginView = Marionette.ItemView.extend({
	tagName: 'form', attributes: {"role":"form"},
	template: '#LoginFormView',
	ui: {
		user: '#jamendo-username',
		pass: '#jamendo-password',
	},
	events: {
		"submit": "loginFormSubmitted",
	},
	loginFormSubmitted: function(e) {
		e.preventDefault();
		var user = this.ui.user.val(), pass = this.ui.pass.val();
		console.log("On the view:", user, pass);
		this.trigger("loginRequested", {'user': user, 'pass': pass});
		return false;
	}
});

var loginView = new App.LoginView();

App.on("initialize:after", function() {
	App.bodyRegion.show(loginView);
});

App.listenTo(loginView, 'loginRequested', function(data) {
	console.log("On the app: login requested", data);
});

$(document).ready(function() {
	App.start();
});

</script>

</head>

<!--
  BODY
-->
<body>

<p>You should not see this in the page.</p>

</body>
</html>
